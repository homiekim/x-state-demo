# x-state-demo

sipe 3기 상태관리 미션에서 xstate 사용 법을 공유하기 위해 만든 demo 입니다!

### 왜 하나요?

- x-state 사용은은 저의 개인적인 백로그 작업이기도 한데요
- 복잡한 구조 + step이 있는 form 핸들링을 개선하고 싶은 니즈가 있었어요
- 리서치 하던 중 알게된 라이브러리.. but 러닝커브 + 리소스 부족으로 사용경험은 없는 상태
- 개인적인 스터디 + 진입장벽을 낮춰 드리고자 소개드리려고 합니다.


### x-state?

- js, ts 애플리케이션에서 상태를 관리하는 솔루션
- 이벤트 기반 프로그래밍 방식을 사용
- 복잡한 로직, 워크플로우를 효율적으로 다루기 위해 사용
- Actor, State Machine 이라는 코어 컨셉을 가짐
- 리액트, 뷰 같은 라이브러리 환경 위에서 통합도 잘 지원함


### 상태머신 (State Machine)

- 특정 이벤트에 따라 상태가 어떻게 전환되는지 모델링된 머신
- [https://ko.wikipedia.org/wiki/%EC%9C%A0%ED%95%9C_%EC%83%81%ED%83%9C_%EA%B8%B0%EA%B3%84](https://ko.wikipedia.org/wiki/%EC%9C%A0%ED%95%9C_%EC%83%81%ED%83%9C_%EA%B8%B0%EA%B3%84)
- 상태 간의 이벤트, 전환을 명시 할 수 있는 장점
- [공식문서](https://stately.ai/docs/state-machines-and-statecharts) 를 보는게 가장 좋음
- 상태머신을 사용하면, 이해, 테스트 , 유지보수 등등 장점이 있다고함


### 액터 (Actor Model)

- 컴퓨터 사이언스에서 동시 처리를 계산한는 수학적모델? => 그냥 번역하면 이런 뜻
- xstate에서는 상태머신을 정의하고 이 상태머신을 사용하는 주체라고 생각하면 될 듯?
- 이 액터는 이벤트를 발생시키거나 수신할 수 있음
- machine에 정의한 이벤트와 로직들을 가지고 transition을 일으킬 수 있는 instance 정도? 로 이해하면 되지 않을까
- state를 가지고 있다.


사실 상태머신, 액터 요론건 원론적인 컨셉에 가까움

정리하자면

- 이벤트 기반의 상태머신을 가지고 있다
- 이 상태 머신안에 state, 와 로직 정의
- actor는 이 machine을 사용하는 구현체
- 우리는 상태머신에 내 어플리케이션에서 관리하는 state의 워크플로우를 정의해 두고 어플리케이션에서 핸들링할 수 있다.
- 요론 컨셉을 구체적으로 구현한 라이브러리가 결국에 xstate이고 얘가 많은 기능을 제공함 대표적으로

  - `state` - 상태머신에서 정의된 state 기존의 리액트 state와 비슷한 개념이라고 보면됨
  - `context` - 상태머신이 가지고 있는 데이터 값, 상태 외에도 store? 처럼 값을 저장해둘 수 있는 곳
  - `transition` - 상태가 다른 상태로 변경되는 것
  - `event`  - 각 state에서 가지고 있는 이벤트 이 이벤트를 기반으로 action을 실행하거나, transition을 발생시킬 수 있음
  - `entry` / `exit` : state 진입 혹은 종료시 발생할 수 있는 이벤트
  - `action` : 이벤트 실행시 발생할 수 있는 사이드 이펙트 같은거
  - `assign` : context에 변경을 일으키는 action, context는 무조건 assign을 통해 변경가능
  - `meta` : 각 state에 meta라는 정적 데이터를 가지고 있을 수 있음

  이거 말고도 제공하는 기능이 다양함


### Demo Project

짐싸, 미소 같은 청소의뢰 서비스에서 요청서를 작성하는 플로우를 가정하고 간단한 데모를 만들어 봅시다!

- 해당 플로우는 청소 종류 선택, 날짜 입력, 주소 입력, 주소 상세정보 입력 , 결과확인 페이지, 끝 이렇게 6개의 페이지로 이루어져 있습니다!
- 사실 구현 방법은 다양하지만 페이지 전환 시에도 글로벌 하게 state를 유지할 수 있게 만들기위해 굳이 여러 페이지로 나누었습니다!

1page :  청소 종류 선택  - '이사청소' , '거주청소' 둘중에 하나 선택

2page :  날짜 입력 - 예약 날짜와 시간 입력 받음

3page :  주소 입력 - 주소를 입력 받음

4page : 상세정보 입력

- 상세정보 입력
- 건물종류 선택 (빌라/연립, 오피스텔, 주택 , 아파트, 상가/사무실)
- 방구조(원룸, 1.5룸, 2룸, 3룸, 4룸, 5룸 이상)
- 공급면적(string input)
- 복층 (있음, 없음)
- 화장실개수 (1개, 2개, 3개, 4개이상)
- 베란다 개수 (없음, 1개, 2개, 3개이상)
- 엘리베이터 여부 (있음, 없음)
- 주차 가능 여부 (가능, 불가능)

5page : 결과 확인 - 퍼널 진행하면 입력 받은 값 화면에 보여줌 , 의뢰하기 하면 success 페이지로 이동, 처음부터 버튼 누루면 다시 처음부터 진행
